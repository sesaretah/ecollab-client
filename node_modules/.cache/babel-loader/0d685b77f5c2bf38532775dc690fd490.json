{"ast":null,"code":"/*! tether 1.4.7 */\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Tether = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if ('value' in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  var TetherBase = undefined;\n\n  if (typeof TetherBase === 'undefined') {\n    TetherBase = {\n      modules: []\n    };\n  }\n\n  var zeroElement = null; // Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n  // if the element lies within a nested document (<frame> or <iframe>-like).\n\n  function getActualBoundingClientRect(node) {\n    var boundingRect = node.getBoundingClientRect(); // The original object returned by getBoundingClientRect is immutable, so we clone it\n    // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n\n    var rect = {};\n\n    for (var k in boundingRect) {\n      rect[k] = boundingRect[k];\n    }\n\n    try {\n      if (node.ownerDocument !== document) {\n        var _frameElement = node.ownerDocument.defaultView.frameElement;\n\n        if (_frameElement) {\n          var frameRect = getActualBoundingClientRect(_frameElement);\n          rect.top += frameRect.top;\n          rect.bottom += frameRect.top;\n          rect.left += frameRect.left;\n          rect.right += frameRect.left;\n        }\n      }\n    } catch (err) {// Ignore \"Access is denied\" in IE11/Edge\n    }\n\n    return rect;\n  }\n\n  function getScrollParents(el) {\n    // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    var computedStyle = getComputedStyle(el) || {};\n    var position = computedStyle.position;\n    var parents = [];\n\n    if (position === 'fixed') {\n      return [el];\n    }\n\n    var parent = el;\n\n    while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n      var style = undefined;\n\n      try {\n        style = getComputedStyle(parent);\n      } catch (err) {}\n\n      if (typeof style === 'undefined' || style === null) {\n        parents.push(parent);\n        return parents;\n      }\n\n      var _style = style;\n      var overflow = _style.overflow;\n      var overflowX = _style.overflowX;\n      var overflowY = _style.overflowY;\n\n      if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n        if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n          parents.push(parent);\n        }\n      }\n    }\n\n    parents.push(el.ownerDocument.body); // If the node is within a frame, account for the parent window scroll\n\n    if (el.ownerDocument !== document) {\n      parents.push(el.ownerDocument.defaultView);\n    }\n\n    return parents;\n  }\n\n  var uniqueId = function () {\n    var id = 0;\n    return function () {\n      return ++id;\n    };\n  }();\n\n  var zeroPosCache = {};\n\n  var getOrigin = function getOrigin() {\n    // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n    // jitter as the user scrolls that messes with our ability to detect if two positions\n    // are equivilant or not.  We place an element at the top left of the page that will\n    // get the same jitter, so we can cancel the two out.\n    var node = zeroElement;\n\n    if (!node || !document.body.contains(node)) {\n      node = document.createElement('div');\n      node.setAttribute('data-tether-id', uniqueId());\n      extend(node.style, {\n        top: 0,\n        left: 0,\n        position: 'absolute'\n      });\n      document.body.appendChild(node);\n      zeroElement = node;\n    }\n\n    var id = node.getAttribute('data-tether-id');\n\n    if (typeof zeroPosCache[id] === 'undefined') {\n      zeroPosCache[id] = getActualBoundingClientRect(node); // Clear the cache when this position call is done\n\n      defer(function () {\n        delete zeroPosCache[id];\n      });\n    }\n\n    return zeroPosCache[id];\n  };\n\n  function removeUtilElements() {\n    if (zeroElement) {\n      document.body.removeChild(zeroElement);\n    }\n\n    zeroElement = null;\n  }\n\n  ;\n\n  function getBounds(el) {\n    var doc = undefined;\n\n    if (el === document) {\n      doc = document;\n      el = document.documentElement;\n    } else {\n      doc = el.ownerDocument;\n    }\n\n    var docEl = doc.documentElement;\n    var box = getActualBoundingClientRect(el);\n    var origin = getOrigin();\n    box.top -= origin.top;\n    box.left -= origin.left;\n\n    if (typeof box.width === 'undefined') {\n      box.width = document.body.scrollWidth - box.left - box.right;\n    }\n\n    if (typeof box.height === 'undefined') {\n      box.height = document.body.scrollHeight - box.top - box.bottom;\n    }\n\n    box.top = box.top - docEl.clientTop;\n    box.left = box.left - docEl.clientLeft;\n    box.right = doc.body.clientWidth - box.width - box.left;\n    box.bottom = doc.body.clientHeight - box.height - box.top;\n    return box;\n  }\n\n  function getOffsetParent(el) {\n    return el.offsetParent || document.documentElement;\n  }\n\n  var _scrollBarSize = null;\n\n  function getScrollBarSize() {\n    if (_scrollBarSize) {\n      return _scrollBarSize;\n    }\n\n    var inner = document.createElement('div');\n    inner.style.width = '100%';\n    inner.style.height = '200px';\n    var outer = document.createElement('div');\n    extend(outer.style, {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      pointerEvents: 'none',\n      visibility: 'hidden',\n      width: '200px',\n      height: '150px',\n      overflow: 'hidden'\n    });\n    outer.appendChild(inner);\n    document.body.appendChild(outer);\n    var widthContained = inner.offsetWidth;\n    outer.style.overflow = 'scroll';\n    var widthScroll = inner.offsetWidth;\n\n    if (widthContained === widthScroll) {\n      widthScroll = outer.clientWidth;\n    }\n\n    document.body.removeChild(outer);\n    var width = widthContained - widthScroll;\n    _scrollBarSize = {\n      width: width,\n      height: width\n    };\n    return _scrollBarSize;\n  }\n\n  function extend() {\n    var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n    var args = [];\n    Array.prototype.push.apply(args, arguments);\n    args.slice(1).forEach(function (obj) {\n      if (obj) {\n        for (var key in obj) {\n          if ({}.hasOwnProperty.call(obj, key)) {\n            out[key] = obj[key];\n          }\n        }\n      }\n    });\n    return out;\n  }\n\n  function removeClass(el, name) {\n    if (typeof el.classList !== 'undefined') {\n      name.split(' ').forEach(function (cls) {\n        if (cls.trim()) {\n          el.classList.remove(cls);\n        }\n      });\n    } else {\n      var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');\n      var className = getClassName(el).replace(regex, ' ');\n      setClassName(el, className);\n    }\n  }\n\n  function addClass(el, name) {\n    if (typeof el.classList !== 'undefined') {\n      name.split(' ').forEach(function (cls) {\n        if (cls.trim()) {\n          el.classList.add(cls);\n        }\n      });\n    } else {\n      removeClass(el, name);\n      var cls = getClassName(el) + (' ' + name);\n      setClassName(el, cls);\n    }\n  }\n\n  function hasClass(el, name) {\n    if (typeof el.classList !== 'undefined') {\n      return el.classList.contains(name);\n    }\n\n    var className = getClassName(el);\n    return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);\n  }\n\n  function getClassName(el) {\n    // Can't use just SVGAnimatedString here since nodes within a Frame in IE have\n    // completely separately SVGAnimatedString base classes\n    if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {\n      return el.className.baseVal;\n    }\n\n    return el.className;\n  }\n\n  function setClassName(el, className) {\n    el.setAttribute('class', className);\n  }\n\n  function updateClasses(el, add, all) {\n    // Of the set of 'all' classes, we need the 'add' classes, and only the\n    // 'add' classes to be set.\n    all.forEach(function (cls) {\n      if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\n        removeClass(el, cls);\n      }\n    });\n    add.forEach(function (cls) {\n      if (!hasClass(el, cls)) {\n        addClass(el, cls);\n      }\n    });\n  }\n\n  var deferred = [];\n\n  var defer = function defer(fn) {\n    deferred.push(fn);\n  };\n\n  var flush = function flush() {\n    var fn = undefined;\n\n    while (fn = deferred.pop()) {\n      fn();\n    }\n  };\n\n  var Evented = function () {\n    function Evented() {\n      _classCallCheck(this, Evented);\n    }\n\n    _createClass(Evented, [{\n      key: 'on',\n      value: function on(event, handler, ctx) {\n        var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n        if (typeof this.bindings === 'undefined') {\n          this.bindings = {};\n        }\n\n        if (typeof this.bindings[event] === 'undefined') {\n          this.bindings[event] = [];\n        }\n\n        this.bindings[event].push({\n          handler: handler,\n          ctx: ctx,\n          once: once\n        });\n      }\n    }, {\n      key: 'once',\n      value: function once(event, handler, ctx) {\n        this.on(event, handler, ctx, true);\n      }\n    }, {\n      key: 'off',\n      value: function off(event, handler) {\n        if (typeof this.bindings === 'undefined' || typeof this.bindings[event] === 'undefined') {\n          return;\n        }\n\n        if (typeof handler === 'undefined') {\n          delete this.bindings[event];\n        } else {\n          var i = 0;\n\n          while (i < this.bindings[event].length) {\n            if (this.bindings[event][i].handler === handler) {\n              this.bindings[event].splice(i, 1);\n            } else {\n              ++i;\n            }\n          }\n        }\n      }\n    }, {\n      key: 'trigger',\n      value: function trigger(event) {\n        if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\n          var i = 0;\n\n          for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          while (i < this.bindings[event].length) {\n            var _bindings$event$i = this.bindings[event][i];\n            var handler = _bindings$event$i.handler;\n            var ctx = _bindings$event$i.ctx;\n            var once = _bindings$event$i.once;\n            var context = ctx;\n\n            if (typeof context === 'undefined') {\n              context = this;\n            }\n\n            handler.apply(context, args);\n\n            if (once) {\n              this.bindings[event].splice(i, 1);\n            } else {\n              ++i;\n            }\n          }\n        }\n      }\n    }]);\n\n    return Evented;\n  }();\n\n  TetherBase.Utils = {\n    getActualBoundingClientRect: getActualBoundingClientRect,\n    getScrollParents: getScrollParents,\n    getBounds: getBounds,\n    getOffsetParent: getOffsetParent,\n    extend: extend,\n    addClass: addClass,\n    removeClass: removeClass,\n    hasClass: hasClass,\n    updateClasses: updateClasses,\n    defer: defer,\n    flush: flush,\n    uniqueId: uniqueId,\n    Evented: Evented,\n    getScrollBarSize: getScrollBarSize,\n    removeUtilElements: removeUtilElements\n  };\n  /* globals TetherBase, performance */\n\n  'use strict';\n\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i['return']) _i['return']();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n\n      return _arr;\n    }\n\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n      }\n    };\n  }();\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if ('value' in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n\n  var _get = function get(_x6, _x7, _x8) {\n    var _again = true;\n\n    _function: while (_again) {\n      var object = _x6,\n          property = _x7,\n          receiver = _x8;\n      _again = false;\n      if (object === null) object = Function.prototype;\n      var desc = Object.getOwnPropertyDescriptor(object, property);\n\n      if (desc === undefined) {\n        var parent = Object.getPrototypeOf(object);\n\n        if (parent === null) {\n          return undefined;\n        } else {\n          _x6 = parent;\n          _x7 = property;\n          _x8 = receiver;\n          _again = true;\n          desc = parent = undefined;\n          continue _function;\n        }\n      } else if ('value' in desc) {\n        return desc.value;\n      } else {\n        var getter = desc.get;\n\n        if (getter === undefined) {\n          return undefined;\n        }\n\n        return getter.call(receiver);\n      }\n    }\n  };\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError('Cannot call a class as a function');\n    }\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== 'function' && superClass !== null) {\n      throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass);\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  if (typeof TetherBase === 'undefined') {\n    throw new Error('You must include the utils.js file before tether.js');\n  }\n\n  var _TetherBase$Utils = TetherBase.Utils;\n  var getScrollParents = _TetherBase$Utils.getScrollParents;\n  var getBounds = _TetherBase$Utils.getBounds;\n  var getOffsetParent = _TetherBase$Utils.getOffsetParent;\n  var extend = _TetherBase$Utils.extend;\n  var addClass = _TetherBase$Utils.addClass;\n  var removeClass = _TetherBase$Utils.removeClass;\n  var updateClasses = _TetherBase$Utils.updateClasses;\n  var defer = _TetherBase$Utils.defer;\n  var flush = _TetherBase$Utils.flush;\n  var getScrollBarSize = _TetherBase$Utils.getScrollBarSize;\n  var removeUtilElements = _TetherBase$Utils.removeUtilElements;\n\n  function within(a, b) {\n    var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n    return a + diff >= b && b >= a - diff;\n  }\n\n  var transformKey = function () {\n    if (typeof document === 'undefined') {\n      return '';\n    }\n\n    var el = document.createElement('div');\n    var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n\n    for (var i = 0; i < transforms.length; ++i) {\n      var key = transforms[i];\n\n      if (el.style[key] !== undefined) {\n        return key;\n      }\n    }\n  }();\n\n  var tethers = [];\n\n  var position = function position() {\n    tethers.forEach(function (tether) {\n      tether.position(false);\n    });\n    flush();\n  };\n\n  function now() {\n    if (typeof performance === 'object' && typeof performance.now === 'function') {\n      return performance.now();\n    }\n\n    return +new Date();\n  }\n\n  (function () {\n    var lastCall = null;\n    var lastDuration = null;\n    var pendingTimeout = null;\n\n    var tick = function tick() {\n      if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\n        // We voluntarily throttle ourselves if we can't manage 60fps\n        lastDuration = Math.min(lastDuration - 16, 250); // Just in case this is the last event, remember to position just once more\n\n        pendingTimeout = setTimeout(tick, 250);\n        return;\n      }\n\n      if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {\n        // Some browsers call events a little too frequently, refuse to run more than is reasonable\n        return;\n      }\n\n      if (pendingTimeout != null) {\n        clearTimeout(pendingTimeout);\n        pendingTimeout = null;\n      }\n\n      lastCall = now();\n      position();\n      lastDuration = now() - lastCall;\n    };\n\n    if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n      ['resize', 'scroll', 'touchmove'].forEach(function (event) {\n        window.addEventListener(event, tick);\n      });\n    }\n  })();\n\n  var MIRROR_LR = {\n    center: 'center',\n    left: 'right',\n    right: 'left'\n  };\n  var MIRROR_TB = {\n    middle: 'middle',\n    top: 'bottom',\n    bottom: 'top'\n  };\n  var OFFSET_MAP = {\n    top: 0,\n    left: 0,\n    middle: '50%',\n    center: '50%',\n    bottom: '100%',\n    right: '100%'\n  };\n\n  var autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {\n    var left = attachment.left;\n    var top = attachment.top;\n\n    if (left === 'auto') {\n      left = MIRROR_LR[relativeToAttachment.left];\n    }\n\n    if (top === 'auto') {\n      top = MIRROR_TB[relativeToAttachment.top];\n    }\n\n    return {\n      left: left,\n      top: top\n    };\n  };\n\n  var attachmentToOffset = function attachmentToOffset(attachment) {\n    var left = attachment.left;\n    var top = attachment.top;\n\n    if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\n      left = OFFSET_MAP[attachment.left];\n    }\n\n    if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\n      top = OFFSET_MAP[attachment.top];\n    }\n\n    return {\n      left: left,\n      top: top\n    };\n  };\n\n  function addOffset() {\n    var out = {\n      top: 0,\n      left: 0\n    };\n\n    for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {\n      offsets[_key] = arguments[_key];\n    }\n\n    offsets.forEach(function (_ref) {\n      var top = _ref.top;\n      var left = _ref.left;\n\n      if (typeof top === 'string') {\n        top = parseFloat(top, 10);\n      }\n\n      if (typeof left === 'string') {\n        left = parseFloat(left, 10);\n      }\n\n      out.top += top;\n      out.left += left;\n    });\n    return out;\n  }\n\n  function offsetToPx(offset, size) {\n    if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\n      offset.left = parseFloat(offset.left, 10) / 100 * size.width;\n    }\n\n    if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\n      offset.top = parseFloat(offset.top, 10) / 100 * size.height;\n    }\n\n    return offset;\n  }\n\n  var parseOffset = function parseOffset(value) {\n    var _value$split = value.split(' ');\n\n    var _value$split2 = _slicedToArray(_value$split, 2);\n\n    var top = _value$split2[0];\n    var left = _value$split2[1];\n    return {\n      top: top,\n      left: left\n    };\n  };\n\n  var parseAttachment = parseOffset;\n\n  var TetherClass = function (_Evented) {\n    _inherits(TetherClass, _Evented);\n\n    function TetherClass(options) {\n      var _this = this;\n\n      _classCallCheck(this, TetherClass);\n\n      _get(Object.getPrototypeOf(TetherClass.prototype), 'constructor', this).call(this);\n\n      this.position = this.position.bind(this);\n      tethers.push(this);\n      this.history = [];\n      this.setOptions(options, false);\n      TetherBase.modules.forEach(function (module) {\n        if (typeof module.initialize !== 'undefined') {\n          module.initialize.call(_this);\n        }\n      });\n      this.position();\n    }\n\n    _createClass(TetherClass, [{\n      key: 'getClass',\n      value: function getClass() {\n        var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n        var classes = this.options.classes;\n\n        if (typeof classes !== 'undefined' && classes[key]) {\n          return this.options.classes[key];\n        } else if (this.options.classPrefix) {\n          return this.options.classPrefix + '-' + key;\n        } else {\n          return key;\n        }\n      }\n    }, {\n      key: 'setOptions',\n      value: function setOptions(options) {\n        var _this2 = this;\n\n        var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n        var defaults = {\n          offset: '0 0',\n          targetOffset: '0 0',\n          targetAttachment: 'auto auto',\n          classPrefix: 'tether'\n        };\n        this.options = extend(defaults, options);\n        var _options = this.options;\n        var element = _options.element;\n        var target = _options.target;\n        var targetModifier = _options.targetModifier;\n        this.element = element;\n        this.target = target;\n        this.targetModifier = targetModifier;\n\n        if (this.target === 'viewport') {\n          this.target = document.body;\n          this.targetModifier = 'visible';\n        } else if (this.target === 'scroll-handle') {\n          this.target = document.body;\n          this.targetModifier = 'scroll-handle';\n        }\n\n        ['element', 'target'].forEach(function (key) {\n          if (typeof _this2[key] === 'undefined') {\n            throw new Error('Tether Error: Both element and target must be defined');\n          }\n\n          if (typeof _this2[key].jquery !== 'undefined') {\n            _this2[key] = _this2[key][0];\n          } else if (typeof _this2[key] === 'string') {\n            _this2[key] = document.querySelector(_this2[key]);\n          }\n        });\n        addClass(this.element, this.getClass('element'));\n\n        if (!(this.options.addTargetClasses === false)) {\n          addClass(this.target, this.getClass('target'));\n        }\n\n        if (!this.options.attachment) {\n          throw new Error('Tether Error: You must provide an attachment');\n        }\n\n        this.targetAttachment = parseAttachment(this.options.targetAttachment);\n        this.attachment = parseAttachment(this.options.attachment);\n        this.offset = parseOffset(this.options.offset);\n        this.targetOffset = parseOffset(this.options.targetOffset);\n\n        if (typeof this.scrollParents !== 'undefined') {\n          this.disable();\n        }\n\n        if (this.targetModifier === 'scroll-handle') {\n          this.scrollParents = [this.target];\n        } else {\n          this.scrollParents = getScrollParents(this.target);\n        }\n\n        if (!(this.options.enabled === false)) {\n          this.enable(pos);\n        }\n      }\n    }, {\n      key: 'getTargetBounds',\n      value: function getTargetBounds() {\n        if (typeof this.targetModifier !== 'undefined') {\n          if (this.targetModifier === 'visible') {\n            if (this.target === document.body) {\n              return {\n                top: pageYOffset,\n                left: pageXOffset,\n                height: innerHeight,\n                width: innerWidth\n              };\n            } else {\n              var bounds = getBounds(this.target);\n              var out = {\n                height: bounds.height,\n                width: bounds.width,\n                top: bounds.top,\n                left: bounds.left\n              };\n              out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n              out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\n              out.height = Math.min(innerHeight, out.height);\n              out.height -= 2;\n              out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n              out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\n              out.width = Math.min(innerWidth, out.width);\n              out.width -= 2;\n\n              if (out.top < pageYOffset) {\n                out.top = pageYOffset;\n              }\n\n              if (out.left < pageXOffset) {\n                out.left = pageXOffset;\n              }\n\n              return out;\n            }\n          } else if (this.targetModifier === 'scroll-handle') {\n            var bounds = undefined;\n            var target = this.target;\n\n            if (target === document.body) {\n              target = document.documentElement;\n              bounds = {\n                left: pageXOffset,\n                top: pageYOffset,\n                height: innerHeight,\n                width: innerWidth\n              };\n            } else {\n              bounds = getBounds(target);\n            }\n\n            var style = getComputedStyle(target);\n            var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;\n            var scrollBottom = 0;\n\n            if (hasBottomScroll) {\n              scrollBottom = 15;\n            }\n\n            var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n            var out = {\n              width: 15,\n              height: height * 0.975 * (height / target.scrollHeight),\n              left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n            };\n            var fitAdj = 0;\n\n            if (height < 408 && this.target === document.body) {\n              fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n            }\n\n            if (this.target !== document.body) {\n              out.height = Math.max(out.height, 24);\n            }\n\n            var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\n            out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n            if (this.target === document.body) {\n              out.height = Math.max(out.height, 24);\n            }\n\n            return out;\n          }\n        } else {\n          return getBounds(this.target);\n        }\n      }\n    }, {\n      key: 'clearCache',\n      value: function clearCache() {\n        this._cache = {};\n      }\n    }, {\n      key: 'cache',\n      value: function cache(k, getter) {\n        // More than one module will often need the same DOM info, so\n        // we keep a cache which is cleared on each position call\n        if (typeof this._cache === 'undefined') {\n          this._cache = {};\n        }\n\n        if (typeof this._cache[k] === 'undefined') {\n          this._cache[k] = getter.call(this);\n        }\n\n        return this._cache[k];\n      }\n    }, {\n      key: 'enable',\n      value: function enable() {\n        var _this3 = this;\n\n        var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n        if (!(this.options.addTargetClasses === false)) {\n          addClass(this.target, this.getClass('enabled'));\n        }\n\n        addClass(this.element, this.getClass('enabled'));\n        this.enabled = true;\n        this.scrollParents.forEach(function (parent) {\n          if (parent !== _this3.target.ownerDocument) {\n            parent.addEventListener('scroll', _this3.position);\n          }\n        });\n\n        if (pos) {\n          this.position();\n        }\n      }\n    }, {\n      key: 'disable',\n      value: function disable() {\n        var _this4 = this;\n\n        removeClass(this.target, this.getClass('enabled'));\n        removeClass(this.element, this.getClass('enabled'));\n        this.enabled = false;\n\n        if (typeof this.scrollParents !== 'undefined') {\n          this.scrollParents.forEach(function (parent) {\n            parent.removeEventListener('scroll', _this4.position);\n          });\n        }\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        var _this5 = this;\n\n        this.disable();\n        tethers.forEach(function (tether, i) {\n          if (tether === _this5) {\n            tethers.splice(i, 1);\n          }\n        }); // Remove any elements we were using for convenience from the DOM\n\n        if (tethers.length === 0) {\n          removeUtilElements();\n        }\n      }\n    }, {\n      key: 'updateAttachClasses',\n      value: function updateAttachClasses(elementAttach, targetAttach) {\n        var _this6 = this;\n\n        elementAttach = elementAttach || this.attachment;\n        targetAttach = targetAttach || this.targetAttachment;\n        var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n\n        if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\n          // updateAttachClasses can be called more than once in a position call, so\n          // we need to clean up after ourselves such that when the last defer gets\n          // ran it doesn't add any extra classes from previous calls.\n          this._addAttachClasses.splice(0, this._addAttachClasses.length);\n        }\n\n        if (typeof this._addAttachClasses === 'undefined') {\n          this._addAttachClasses = [];\n        }\n\n        var add = this._addAttachClasses;\n\n        if (elementAttach.top) {\n          add.push(this.getClass('element-attached') + '-' + elementAttach.top);\n        }\n\n        if (elementAttach.left) {\n          add.push(this.getClass('element-attached') + '-' + elementAttach.left);\n        }\n\n        if (targetAttach.top) {\n          add.push(this.getClass('target-attached') + '-' + targetAttach.top);\n        }\n\n        if (targetAttach.left) {\n          add.push(this.getClass('target-attached') + '-' + targetAttach.left);\n        }\n\n        var all = [];\n        sides.forEach(function (side) {\n          all.push(_this6.getClass('element-attached') + '-' + side);\n          all.push(_this6.getClass('target-attached') + '-' + side);\n        });\n        defer(function () {\n          if (!(typeof _this6._addAttachClasses !== 'undefined')) {\n            return;\n          }\n\n          updateClasses(_this6.element, _this6._addAttachClasses, all);\n\n          if (!(_this6.options.addTargetClasses === false)) {\n            updateClasses(_this6.target, _this6._addAttachClasses, all);\n          }\n\n          delete _this6._addAttachClasses;\n        });\n      }\n    }, {\n      key: 'position',\n      value: function position() {\n        var _this7 = this;\n\n        var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0]; // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n        // tethers (in which case call Tether.Utils.flush yourself when you're done)\n\n        if (!this.enabled) {\n          return;\n        }\n\n        this.clearCache(); // Turn 'auto' attachments into the appropriate corner or edge\n\n        var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n        this.updateAttachClasses(this.attachment, targetAttachment);\n        var elementPos = this.cache('element-bounds', function () {\n          return getBounds(_this7.element);\n        });\n        var width = elementPos.width;\n        var height = elementPos.height;\n\n        if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n          var _lastSize = this.lastSize; // We cache the height and width to make it possible to position elements that are\n          // getting hidden.\n\n          width = _lastSize.width;\n          height = _lastSize.height;\n        } else {\n          this.lastSize = {\n            width: width,\n            height: height\n          };\n        }\n\n        var targetPos = this.cache('target-bounds', function () {\n          return _this7.getTargetBounds();\n        });\n        var targetSize = targetPos; // Get an actual px offset from the attachment\n\n        var offset = offsetToPx(attachmentToOffset(this.attachment), {\n          width: width,\n          height: height\n        });\n        var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n        var manualOffset = offsetToPx(this.offset, {\n          width: width,\n          height: height\n        });\n        var manualTargetOffset = offsetToPx(this.targetOffset, targetSize); // Add the manually provided offset\n\n        offset = addOffset(offset, manualOffset);\n        targetOffset = addOffset(targetOffset, manualTargetOffset); // It's now our goal to make (element position + offset) == (target position + target offset)\n\n        var left = targetPos.left + targetOffset.left - offset.left;\n        var top = targetPos.top + targetOffset.top - offset.top;\n\n        for (var i = 0; i < TetherBase.modules.length; ++i) {\n          var _module2 = TetherBase.modules[i];\n\n          var ret = _module2.position.call(this, {\n            left: left,\n            top: top,\n            targetAttachment: targetAttachment,\n            targetPos: targetPos,\n            elementPos: elementPos,\n            offset: offset,\n            targetOffset: targetOffset,\n            manualOffset: manualOffset,\n            manualTargetOffset: manualTargetOffset,\n            scrollbarSize: scrollbarSize,\n            attachment: this.attachment\n          });\n\n          if (ret === false) {\n            return false;\n          } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\n            continue;\n          } else {\n            top = ret.top;\n            left = ret.left;\n          }\n        } // We describe the position three different ways to give the optimizer\n        // a chance to decide the best possible way to position the element\n        // with the fewest repaints.\n\n\n        var next = {\n          // It's position relative to the page (absolute positioning when\n          // the element is a child of the body)\n          page: {\n            top: top,\n            left: left\n          },\n          // It's position relative to the viewport (fixed positioning)\n          viewport: {\n            top: top - pageYOffset,\n            bottom: pageYOffset - top - height + innerHeight,\n            left: left - pageXOffset,\n            right: pageXOffset - left - width + innerWidth\n          }\n        };\n        var doc = this.target.ownerDocument;\n        var win = doc.defaultView;\n        var scrollbarSize = undefined;\n\n        if (win.innerHeight > doc.documentElement.clientHeight) {\n          scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n          next.viewport.bottom -= scrollbarSize.height;\n        }\n\n        if (win.innerWidth > doc.documentElement.clientWidth) {\n          scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n          next.viewport.right -= scrollbarSize.width;\n        }\n\n        if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n          // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n          next.page.bottom = doc.body.scrollHeight - top - height;\n          next.page.right = doc.body.scrollWidth - left - width;\n        }\n\n        if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {\n          (function () {\n            var offsetParent = _this7.cache('target-offsetparent', function () {\n              return getOffsetParent(_this7.target);\n            });\n\n            var offsetPosition = _this7.cache('target-offsetparent-bounds', function () {\n              return getBounds(offsetParent);\n            });\n\n            var offsetParentStyle = getComputedStyle(offsetParent);\n            var offsetParentSize = offsetPosition;\n            var offsetBorder = {};\n            ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\n              offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);\n            });\n            offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n            offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n            if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\n              if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\n                // We're within the visible part of the target's scroll parent\n                var scrollTop = offsetParent.scrollTop;\n                var scrollLeft = offsetParent.scrollLeft; // It's position relative to the target's offset parent (absolute positioning when\n                // the element is moved to be a child of the target's offset parent).\n\n                next.offset = {\n                  top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n                  left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n                };\n              }\n            }\n          })();\n        } // We could also travel up the DOM and try each containing context, rather than only\n        // looking at the body, but we're gonna get diminishing returns.\n\n\n        this.move(next);\n        this.history.unshift(next);\n\n        if (this.history.length > 3) {\n          this.history.pop();\n        }\n\n        if (flushChanges) {\n          flush();\n        }\n\n        return true;\n      } // THE ISSUE\n\n    }, {\n      key: 'move',\n      value: function move(pos) {\n        var _this8 = this;\n\n        if (!(typeof this.element.parentNode !== 'undefined')) {\n          return;\n        }\n\n        var same = {};\n\n        for (var type in pos) {\n          same[type] = {};\n\n          for (var key in pos[type]) {\n            var found = false;\n\n            for (var i = 0; i < this.history.length; ++i) {\n              var point = this.history[i];\n\n              if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {\n                found = true;\n                break;\n              }\n            }\n\n            if (!found) {\n              same[type][key] = true;\n            }\n          }\n        }\n\n        var css = {\n          top: '',\n          left: '',\n          right: '',\n          bottom: ''\n        };\n\n        var transcribe = function transcribe(_same, _pos) {\n          var hasOptimizations = typeof _this8.options.optimizations !== 'undefined';\n          var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;\n\n          if (gpu !== false) {\n            var yPos = undefined,\n                xPos = undefined;\n\n            if (_same.top) {\n              css.top = 0;\n              yPos = _pos.top;\n            } else {\n              css.bottom = 0;\n              yPos = -_pos.bottom;\n            }\n\n            if (_same.left) {\n              css.left = 0;\n              xPos = _pos.left;\n            } else {\n              css.right = 0;\n              xPos = -_pos.right;\n            }\n\n            if (typeof window.devicePixelRatio === 'number' && devicePixelRatio % 1 === 0) {\n              xPos = Math.round(xPos * devicePixelRatio) / devicePixelRatio;\n              yPos = Math.round(yPos * devicePixelRatio) / devicePixelRatio;\n            }\n\n            css[transformKey] = 'translateX(' + xPos + 'px) translateY(' + yPos + 'px)';\n\n            if (transformKey !== 'msTransform') {\n              // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n              // but IE9 doesn't support 3d transforms and will choke.\n              css[transformKey] += \" translateZ(0)\";\n            }\n          } else {\n            if (_same.top) {\n              css.top = _pos.top + 'px';\n            } else {\n              css.bottom = _pos.bottom + 'px';\n            }\n\n            if (_same.left) {\n              css.left = _pos.left + 'px';\n            } else {\n              css.right = _pos.right + 'px';\n            }\n          }\n        };\n\n        var moved = false;\n\n        if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n          css.position = 'absolute';\n          transcribe(same.page, pos.page);\n        } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n          css.position = 'fixed';\n          transcribe(same.viewport, pos.viewport);\n        } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\n          (function () {\n            css.position = 'absolute';\n\n            var offsetParent = _this8.cache('target-offsetparent', function () {\n              return getOffsetParent(_this8.target);\n            });\n\n            if (getOffsetParent(_this8.element) !== offsetParent) {\n              defer(function () {\n                _this8.element.parentNode.removeChild(_this8.element);\n\n                offsetParent.appendChild(_this8.element);\n              });\n            }\n\n            transcribe(same.offset, pos.offset);\n            moved = true;\n          })();\n        } else {\n          css.position = 'absolute';\n          transcribe({\n            top: true,\n            left: true\n          }, pos.page);\n        }\n\n        if (!moved) {\n          if (this.options.bodyElement) {\n            if (this.element.parentNode !== this.options.bodyElement) {\n              this.options.bodyElement.appendChild(this.element);\n            }\n          } else {\n            var isFullscreenElement = function isFullscreenElement(e) {\n              var d = e.ownerDocument;\n              var fe = d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement;\n              return fe === e;\n            };\n\n            var offsetParentIsBody = true;\n            var currentNode = this.element.parentNode;\n\n            while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY' && !isFullscreenElement(currentNode)) {\n              if (getComputedStyle(currentNode).position !== 'static') {\n                offsetParentIsBody = false;\n                break;\n              }\n\n              currentNode = currentNode.parentNode;\n            }\n\n            if (!offsetParentIsBody) {\n              this.element.parentNode.removeChild(this.element);\n              this.element.ownerDocument.body.appendChild(this.element);\n            }\n          }\n        } // Any css change will trigger a repaint, so let's avoid one if nothing changed\n\n\n        var writeCSS = {};\n        var write = false;\n\n        for (var key in css) {\n          var val = css[key];\n          var elVal = this.element.style[key];\n\n          if (elVal !== val) {\n            write = true;\n            writeCSS[key] = val;\n          }\n        }\n\n        if (write) {\n          defer(function () {\n            extend(_this8.element.style, writeCSS);\n\n            _this8.trigger('repositioned');\n          });\n        }\n      }\n    }]);\n\n    return TetherClass;\n  }(Evented);\n\n  TetherClass.modules = [];\n  TetherBase.position = position;\n  var Tether = extend(TetherClass, TetherBase);\n  /* globals TetherBase */\n\n  'use strict';\n\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i['return']) _i['return']();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n\n      return _arr;\n    }\n\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n      }\n    };\n  }();\n\n  var _TetherBase$Utils = TetherBase.Utils;\n  var getBounds = _TetherBase$Utils.getBounds;\n  var extend = _TetherBase$Utils.extend;\n  var updateClasses = _TetherBase$Utils.updateClasses;\n  var defer = _TetherBase$Utils.defer;\n  var BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n\n  function getBoundingRect(tether, to) {\n    if (to === 'scrollParent') {\n      to = tether.scrollParents[0];\n    } else if (to === 'window') {\n      to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n    }\n\n    if (to === document) {\n      to = to.documentElement;\n    }\n\n    if (typeof to.nodeType !== 'undefined') {\n      (function () {\n        var node = to;\n        var size = getBounds(to);\n        var pos = size;\n        var style = getComputedStyle(to);\n        to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top]; // Account any parent Frames scroll offset\n\n        if (node.ownerDocument !== document) {\n          var win = node.ownerDocument.defaultView;\n          to[0] += win.pageXOffset;\n          to[1] += win.pageYOffset;\n          to[2] += win.pageXOffset;\n          to[3] += win.pageYOffset;\n        }\n\n        BOUNDS_FORMAT.forEach(function (side, i) {\n          side = side[0].toUpperCase() + side.substr(1);\n\n          if (side === 'Top' || side === 'Left') {\n            to[i] += parseFloat(style['border' + side + 'Width']);\n          } else {\n            to[i] -= parseFloat(style['border' + side + 'Width']);\n          }\n        });\n      })();\n    }\n\n    return to;\n  }\n\n  TetherBase.modules.push({\n    position: function position(_ref) {\n      var _this = this;\n\n      var top = _ref.top;\n      var left = _ref.left;\n      var targetAttachment = _ref.targetAttachment;\n\n      if (!this.options.constraints) {\n        return true;\n      }\n\n      var _cache = this.cache('element-bounds', function () {\n        return getBounds(_this.element);\n      });\n\n      var height = _cache.height;\n      var width = _cache.width;\n\n      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n        var _lastSize = this.lastSize; // Handle the item getting hidden as a result of our positioning without glitching\n        // the classes in and out\n\n        width = _lastSize.width;\n        height = _lastSize.height;\n      }\n\n      var targetSize = this.cache('target-bounds', function () {\n        return _this.getTargetBounds();\n      });\n      var targetHeight = targetSize.height;\n      var targetWidth = targetSize.width;\n      var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\n      this.options.constraints.forEach(function (constraint) {\n        var outOfBoundsClass = constraint.outOfBoundsClass;\n        var pinnedClass = constraint.pinnedClass;\n\n        if (outOfBoundsClass) {\n          allClasses.push(outOfBoundsClass);\n        }\n\n        if (pinnedClass) {\n          allClasses.push(pinnedClass);\n        }\n      });\n      allClasses.forEach(function (cls) {\n        ['left', 'top', 'right', 'bottom'].forEach(function (side) {\n          allClasses.push(cls + '-' + side);\n        });\n      });\n      var addClasses = [];\n      var tAttachment = extend({}, targetAttachment);\n      var eAttachment = extend({}, this.attachment);\n      this.options.constraints.forEach(function (constraint) {\n        var to = constraint.to;\n        var attachment = constraint.attachment;\n        var pin = constraint.pin;\n\n        if (typeof attachment === 'undefined') {\n          attachment = '';\n        }\n\n        var changeAttachX = undefined,\n            changeAttachY = undefined;\n\n        if (attachment.indexOf(' ') >= 0) {\n          var _attachment$split = attachment.split(' ');\n\n          var _attachment$split2 = _slicedToArray(_attachment$split, 2);\n\n          changeAttachY = _attachment$split2[0];\n          changeAttachX = _attachment$split2[1];\n        } else {\n          changeAttachX = changeAttachY = attachment;\n        }\n\n        var bounds = getBoundingRect(_this, to);\n\n        if (changeAttachY === 'target' || changeAttachY === 'both') {\n          if (top < bounds[1] && tAttachment.top === 'top') {\n            top += targetHeight;\n            tAttachment.top = 'bottom';\n          }\n\n          if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n            top -= targetHeight;\n            tAttachment.top = 'top';\n          }\n        }\n\n        if (changeAttachY === 'together') {\n          if (tAttachment.top === 'top') {\n            if (eAttachment.top === 'bottom' && top < bounds[1]) {\n              top += targetHeight;\n              tAttachment.top = 'bottom';\n              top += height;\n              eAttachment.top = 'top';\n            } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n              top -= height - targetHeight;\n              tAttachment.top = 'bottom';\n              eAttachment.top = 'bottom';\n            }\n          }\n\n          if (tAttachment.top === 'bottom') {\n            if (eAttachment.top === 'top' && top + height > bounds[3]) {\n              top -= targetHeight;\n              tAttachment.top = 'top';\n              top -= height;\n              eAttachment.top = 'bottom';\n            } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n              top += height - targetHeight;\n              tAttachment.top = 'top';\n              eAttachment.top = 'top';\n            }\n          }\n\n          if (tAttachment.top === 'middle') {\n            if (top + height > bounds[3] && eAttachment.top === 'top') {\n              top -= height;\n              eAttachment.top = 'bottom';\n            } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n              top += height;\n              eAttachment.top = 'top';\n            }\n          }\n        }\n\n        if (changeAttachX === 'target' || changeAttachX === 'both') {\n          if (left < bounds[0] && tAttachment.left === 'left') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n          }\n\n          if (left + width > bounds[2] && tAttachment.left === 'right') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n          }\n        }\n\n        if (changeAttachX === 'together') {\n          if (left < bounds[0] && tAttachment.left === 'left') {\n            if (eAttachment.left === 'right') {\n              left += targetWidth;\n              tAttachment.left = 'right';\n              left += width;\n              eAttachment.left = 'left';\n            } else if (eAttachment.left === 'left') {\n              left += targetWidth;\n              tAttachment.left = 'right';\n              left -= width;\n              eAttachment.left = 'right';\n            }\n          } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n            if (eAttachment.left === 'left') {\n              left -= targetWidth;\n              tAttachment.left = 'left';\n              left -= width;\n              eAttachment.left = 'right';\n            } else if (eAttachment.left === 'right') {\n              left -= targetWidth;\n              tAttachment.left = 'left';\n              left += width;\n              eAttachment.left = 'left';\n            }\n          } else if (tAttachment.left === 'center') {\n            if (left + width > bounds[2] && eAttachment.left === 'left') {\n              left -= width;\n              eAttachment.left = 'right';\n            } else if (left < bounds[0] && eAttachment.left === 'right') {\n              left += width;\n              eAttachment.left = 'left';\n            }\n          }\n        }\n\n        if (changeAttachY === 'element' || changeAttachY === 'both') {\n          if (top < bounds[1] && eAttachment.top === 'bottom') {\n            top += height;\n            eAttachment.top = 'top';\n          }\n\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\n            top -= height;\n            eAttachment.top = 'bottom';\n          }\n        }\n\n        if (changeAttachX === 'element' || changeAttachX === 'both') {\n          if (left < bounds[0]) {\n            if (eAttachment.left === 'right') {\n              left += width;\n              eAttachment.left = 'left';\n            } else if (eAttachment.left === 'center') {\n              left += width / 2;\n              eAttachment.left = 'left';\n            }\n          }\n\n          if (left + width > bounds[2]) {\n            if (eAttachment.left === 'left') {\n              left -= width;\n              eAttachment.left = 'right';\n            } else if (eAttachment.left === 'center') {\n              left -= width / 2;\n              eAttachment.left = 'right';\n            }\n          }\n        }\n\n        if (typeof pin === 'string') {\n          pin = pin.split(',').map(function (p) {\n            return p.trim();\n          });\n        } else if (pin === true) {\n          pin = ['top', 'left', 'right', 'bottom'];\n        }\n\n        pin = pin || [];\n        var pinned = [];\n        var oob = [];\n\n        if (top < bounds[1]) {\n          if (pin.indexOf('top') >= 0) {\n            top = bounds[1];\n            pinned.push('top');\n          } else {\n            oob.push('top');\n          }\n        }\n\n        if (top + height > bounds[3]) {\n          if (pin.indexOf('bottom') >= 0) {\n            top = bounds[3] - height;\n            pinned.push('bottom');\n          } else {\n            oob.push('bottom');\n          }\n        }\n\n        if (left < bounds[0]) {\n          if (pin.indexOf('left') >= 0) {\n            left = bounds[0];\n            pinned.push('left');\n          } else {\n            oob.push('left');\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (pin.indexOf('right') >= 0) {\n            left = bounds[2] - width;\n            pinned.push('right');\n          } else {\n            oob.push('right');\n          }\n        }\n\n        if (pinned.length) {\n          (function () {\n            var pinnedClass = undefined;\n\n            if (typeof _this.options.pinnedClass !== 'undefined') {\n              pinnedClass = _this.options.pinnedClass;\n            } else {\n              pinnedClass = _this.getClass('pinned');\n            }\n\n            addClasses.push(pinnedClass);\n            pinned.forEach(function (side) {\n              addClasses.push(pinnedClass + '-' + side);\n            });\n          })();\n        }\n\n        if (oob.length) {\n          (function () {\n            var oobClass = undefined;\n\n            if (typeof _this.options.outOfBoundsClass !== 'undefined') {\n              oobClass = _this.options.outOfBoundsClass;\n            } else {\n              oobClass = _this.getClass('out-of-bounds');\n            }\n\n            addClasses.push(oobClass);\n            oob.forEach(function (side) {\n              addClasses.push(oobClass + '-' + side);\n            });\n          })();\n        }\n\n        if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n          eAttachment.left = tAttachment.left = false;\n        }\n\n        if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n          eAttachment.top = tAttachment.top = false;\n        }\n\n        if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\n          _this.updateAttachClasses(eAttachment, tAttachment);\n\n          _this.trigger('update', {\n            attachment: eAttachment,\n            targetAttachment: tAttachment\n          });\n        }\n      });\n      defer(function () {\n        if (!(_this.options.addTargetClasses === false)) {\n          updateClasses(_this.target, addClasses, allClasses);\n        }\n\n        updateClasses(_this.element, addClasses, allClasses);\n      });\n      return {\n        top: top,\n        left: left\n      };\n    }\n  });\n  /* globals TetherBase */\n\n  'use strict';\n\n  var _TetherBase$Utils = TetherBase.Utils;\n  var getBounds = _TetherBase$Utils.getBounds;\n  var updateClasses = _TetherBase$Utils.updateClasses;\n  var defer = _TetherBase$Utils.defer;\n  TetherBase.modules.push({\n    position: function position(_ref) {\n      var _this = this;\n\n      var top = _ref.top;\n      var left = _ref.left;\n\n      var _cache = this.cache('element-bounds', function () {\n        return getBounds(_this.element);\n      });\n\n      var height = _cache.height;\n      var width = _cache.width;\n      var targetPos = this.getTargetBounds();\n      var bottom = top + height;\n      var right = left + width;\n      var abutted = [];\n\n      if (top <= targetPos.bottom && bottom >= targetPos.top) {\n        ['left', 'right'].forEach(function (side) {\n          var targetPosSide = targetPos[side];\n\n          if (targetPosSide === left || targetPosSide === right) {\n            abutted.push(side);\n          }\n        });\n      }\n\n      if (left <= targetPos.right && right >= targetPos.left) {\n        ['top', 'bottom'].forEach(function (side) {\n          var targetPosSide = targetPos[side];\n\n          if (targetPosSide === top || targetPosSide === bottom) {\n            abutted.push(side);\n          }\n        });\n      }\n\n      var allClasses = [];\n      var addClasses = [];\n      var sides = ['left', 'top', 'right', 'bottom'];\n      allClasses.push(this.getClass('abutted'));\n      sides.forEach(function (side) {\n        allClasses.push(_this.getClass('abutted') + '-' + side);\n      });\n\n      if (abutted.length) {\n        addClasses.push(this.getClass('abutted'));\n      }\n\n      abutted.forEach(function (side) {\n        addClasses.push(_this.getClass('abutted') + '-' + side);\n      });\n      defer(function () {\n        if (!(_this.options.addTargetClasses === false)) {\n          updateClasses(_this.target, addClasses, allClasses);\n        }\n\n        updateClasses(_this.element, addClasses, allClasses);\n      });\n      return true;\n    }\n  });\n  /* globals TetherBase */\n\n  'use strict';\n\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i['return']) _i['return']();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n\n      return _arr;\n    }\n\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError('Invalid attempt to destructure non-iterable instance');\n      }\n    };\n  }();\n\n  TetherBase.modules.push({\n    position: function position(_ref) {\n      var top = _ref.top;\n      var left = _ref.left;\n\n      if (!this.options.shift) {\n        return;\n      }\n\n      var shift = this.options.shift;\n\n      if (typeof this.options.shift === 'function') {\n        shift = this.options.shift.call(this, {\n          top: top,\n          left: left\n        });\n      }\n\n      var shiftTop = undefined,\n          shiftLeft = undefined;\n\n      if (typeof shift === 'string') {\n        shift = shift.split(' ');\n        shift[1] = shift[1] || shift[0];\n        var _shift = shift;\n\n        var _shift2 = _slicedToArray(_shift, 2);\n\n        shiftTop = _shift2[0];\n        shiftLeft = _shift2[1];\n        shiftTop = parseFloat(shiftTop, 10);\n        shiftLeft = parseFloat(shiftLeft, 10);\n      } else {\n        shiftTop = shift.top;\n        shiftLeft = shift.left;\n      }\n\n      top += shiftTop;\n      left += shiftLeft;\n      return {\n        top: top,\n        left: left\n      };\n    }\n  });\n  return Tether;\n});","map":{"version":3,"sources":["/Users/hosseinshafiei/Projects/ecollab/client/node_modules/tether/dist/js/tether.js"],"names":["root","factory","define","amd","exports","module","Tether","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","TetherBase","undefined","modules","zeroElement","getActualBoundingClientRect","node","boundingRect","getBoundingClientRect","rect","k","ownerDocument","document","_frameElement","defaultView","frameElement","frameRect","top","bottom","left","right","err","getScrollParents","el","computedStyle","getComputedStyle","position","parents","parent","parentNode","nodeType","style","push","_style","overflow","overflowX","overflowY","test","indexOf","body","uniqueId","id","zeroPosCache","getOrigin","contains","createElement","setAttribute","extend","appendChild","getAttribute","defer","removeUtilElements","removeChild","getBounds","doc","documentElement","docEl","box","origin","width","scrollWidth","height","scrollHeight","clientTop","clientLeft","clientWidth","clientHeight","getOffsetParent","offsetParent","_scrollBarSize","getScrollBarSize","inner","outer","pointerEvents","visibility","widthContained","offsetWidth","widthScroll","out","arguments","args","Array","apply","slice","forEach","obj","hasOwnProperty","call","removeClass","name","classList","split","cls","trim","remove","regex","RegExp","join","className","getClassName","replace","setClassName","addClass","add","hasClass","SVGAnimatedString","baseVal","updateClasses","all","deferred","fn","flush","pop","Evented","value","on","event","handler","ctx","once","bindings","off","splice","trigger","_len","_key","_bindings$event$i","context","Utils","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_i","Symbol","iterator","_s","next","done","isArray","_get","get","_x6","_x7","_x8","_again","_function","object","property","receiver","Function","desc","getOwnPropertyDescriptor","getPrototypeOf","getter","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","Error","_TetherBase$Utils","within","a","b","diff","transformKey","transforms","tethers","tether","now","performance","Date","lastCall","lastDuration","pendingTimeout","tick","Math","min","setTimeout","clearTimeout","window","addEventListener","MIRROR_LR","center","MIRROR_TB","middle","OFFSET_MAP","autoToFixedAttachment","attachment","relativeToAttachment","attachmentToOffset","addOffset","offsets","_ref","parseFloat","offsetToPx","offset","size","parseOffset","_value$split","_value$split2","parseAttachment","TetherClass","_Evented","options","_this","bind","history","setOptions","initialize","getClass","classes","classPrefix","_this2","pos","defaults","targetOffset","targetAttachment","_options","element","targetModifier","jquery","querySelector","addTargetClasses","scrollParents","disable","enabled","enable","getTargetBounds","pageYOffset","pageXOffset","innerHeight","innerWidth","bounds","hasBottomScroll","scrollBottom","borderTopWidth","borderBottomWidth","borderLeftWidth","fitAdj","pow","max","scrollPercentage","scrollTop","clearCache","_cache","cache","_this3","_this4","removeEventListener","destroy","_this5","updateAttachClasses","elementAttach","targetAttach","_this6","sides","_addAttachClasses","side","_this7","flushChanges","elementPos","lastSize","_lastSize","targetPos","targetSize","manualOffset","manualTargetOffset","_module2","ret","scrollbarSize","page","viewport","win","parentElement","optimizations","moveElement","offsetPosition","offsetParentStyle","offsetParentSize","offsetBorder","toLowerCase","scrollLeft","move","unshift","_this8","same","type","found","point","css","transcribe","_same","_pos","hasOptimizations","gpu","yPos","xPos","devicePixelRatio","round","moved","bodyElement","isFullscreenElement","e","d","fe","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","offsetParentIsBody","currentNode","tagName","writeCSS","write","val","elVal","BOUNDS_FORMAT","getBoundingRect","to","toUpperCase","substr","constraints","targetHeight","targetWidth","allClasses","constraint","outOfBoundsClass","pinnedClass","addClasses","tAttachment","eAttachment","pin","changeAttachX","changeAttachY","_attachment$split","_attachment$split2","map","p","pinned","oob","oobClass","abutted","targetPosSide","shift","shiftTop","shiftLeft","_shift","_shift2"],"mappings":"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","sourcesContent":["/*! tether 1.4.7 */\n\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.Tether = factory();\n  }\n}(this, function() {\n\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar TetherBase = undefined;\nif (typeof TetherBase === 'undefined') {\n  TetherBase = { modules: [] };\n}\n\nvar zeroElement = null;\n\n// Same as native getBoundingClientRect, except it takes into account parent <frame> offsets\n// if the element lies within a nested document (<frame> or <iframe>-like).\nfunction getActualBoundingClientRect(node) {\n  var boundingRect = node.getBoundingClientRect();\n\n  // The original object returned by getBoundingClientRect is immutable, so we clone it\n  // We can't use extend because the properties are not considered part of the object by hasOwnProperty in IE9\n  var rect = {};\n  for (var k in boundingRect) {\n    rect[k] = boundingRect[k];\n  }\n\n  try {\n    if (node.ownerDocument !== document) {\n      var _frameElement = node.ownerDocument.defaultView.frameElement;\n      if (_frameElement) {\n        var frameRect = getActualBoundingClientRect(_frameElement);\n        rect.top += frameRect.top;\n        rect.bottom += frameRect.top;\n        rect.left += frameRect.left;\n        rect.right += frameRect.left;\n      }\n    }\n  } catch (err) {\n    // Ignore \"Access is denied\" in IE11/Edge\n  }\n\n  return rect;\n}\n\nfunction getScrollParents(el) {\n  // In firefox if the el is inside an iframe with display: none; window.getComputedStyle() will return null;\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n  var computedStyle = getComputedStyle(el) || {};\n  var position = computedStyle.position;\n  var parents = [];\n\n  if (position === 'fixed') {\n    return [el];\n  }\n\n  var parent = el;\n  while ((parent = parent.parentNode) && parent && parent.nodeType === 1) {\n    var style = undefined;\n    try {\n      style = getComputedStyle(parent);\n    } catch (err) {}\n\n    if (typeof style === 'undefined' || style === null) {\n      parents.push(parent);\n      return parents;\n    }\n\n    var _style = style;\n    var overflow = _style.overflow;\n    var overflowX = _style.overflowX;\n    var overflowY = _style.overflowY;\n\n    if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n      if (position !== 'absolute' || ['relative', 'absolute', 'fixed'].indexOf(style.position) >= 0) {\n        parents.push(parent);\n      }\n    }\n  }\n\n  parents.push(el.ownerDocument.body);\n\n  // If the node is within a frame, account for the parent window scroll\n  if (el.ownerDocument !== document) {\n    parents.push(el.ownerDocument.defaultView);\n  }\n\n  return parents;\n}\n\nvar uniqueId = (function () {\n  var id = 0;\n  return function () {\n    return ++id;\n  };\n})();\n\nvar zeroPosCache = {};\nvar getOrigin = function getOrigin() {\n  // getBoundingClientRect is unfortunately too accurate.  It introduces a pixel or two of\n  // jitter as the user scrolls that messes with our ability to detect if two positions\n  // are equivilant or not.  We place an element at the top left of the page that will\n  // get the same jitter, so we can cancel the two out.\n  var node = zeroElement;\n  if (!node || !document.body.contains(node)) {\n    node = document.createElement('div');\n    node.setAttribute('data-tether-id', uniqueId());\n    extend(node.style, {\n      top: 0,\n      left: 0,\n      position: 'absolute'\n    });\n\n    document.body.appendChild(node);\n\n    zeroElement = node;\n  }\n\n  var id = node.getAttribute('data-tether-id');\n  if (typeof zeroPosCache[id] === 'undefined') {\n    zeroPosCache[id] = getActualBoundingClientRect(node);\n\n    // Clear the cache when this position call is done\n    defer(function () {\n      delete zeroPosCache[id];\n    });\n  }\n\n  return zeroPosCache[id];\n};\n\nfunction removeUtilElements() {\n  if (zeroElement) {\n    document.body.removeChild(zeroElement);\n  }\n  zeroElement = null;\n};\n\nfunction getBounds(el) {\n  var doc = undefined;\n  if (el === document) {\n    doc = document;\n    el = document.documentElement;\n  } else {\n    doc = el.ownerDocument;\n  }\n\n  var docEl = doc.documentElement;\n\n  var box = getActualBoundingClientRect(el);\n\n  var origin = getOrigin();\n\n  box.top -= origin.top;\n  box.left -= origin.left;\n\n  if (typeof box.width === 'undefined') {\n    box.width = document.body.scrollWidth - box.left - box.right;\n  }\n  if (typeof box.height === 'undefined') {\n    box.height = document.body.scrollHeight - box.top - box.bottom;\n  }\n\n  box.top = box.top - docEl.clientTop;\n  box.left = box.left - docEl.clientLeft;\n  box.right = doc.body.clientWidth - box.width - box.left;\n  box.bottom = doc.body.clientHeight - box.height - box.top;\n\n  return box;\n}\n\nfunction getOffsetParent(el) {\n  return el.offsetParent || document.documentElement;\n}\n\nvar _scrollBarSize = null;\nfunction getScrollBarSize() {\n  if (_scrollBarSize) {\n    return _scrollBarSize;\n  }\n  var inner = document.createElement('div');\n  inner.style.width = '100%';\n  inner.style.height = '200px';\n\n  var outer = document.createElement('div');\n  extend(outer.style, {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    pointerEvents: 'none',\n    visibility: 'hidden',\n    width: '200px',\n    height: '150px',\n    overflow: 'hidden'\n  });\n\n  outer.appendChild(inner);\n\n  document.body.appendChild(outer);\n\n  var widthContained = inner.offsetWidth;\n  outer.style.overflow = 'scroll';\n  var widthScroll = inner.offsetWidth;\n\n  if (widthContained === widthScroll) {\n    widthScroll = outer.clientWidth;\n  }\n\n  document.body.removeChild(outer);\n\n  var width = widthContained - widthScroll;\n\n  _scrollBarSize = { width: width, height: width };\n  return _scrollBarSize;\n}\n\nfunction extend() {\n  var out = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n  var args = [];\n\n  Array.prototype.push.apply(args, arguments);\n\n  args.slice(1).forEach(function (obj) {\n    if (obj) {\n      for (var key in obj) {\n        if (({}).hasOwnProperty.call(obj, key)) {\n          out[key] = obj[key];\n        }\n      }\n    }\n  });\n\n  return out;\n}\n\nfunction removeClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.remove(cls);\n      }\n    });\n  } else {\n    var regex = new RegExp('(^| )' + name.split(' ').join('|') + '( |$)', 'gi');\n    var className = getClassName(el).replace(regex, ' ');\n    setClassName(el, className);\n  }\n}\n\nfunction addClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    name.split(' ').forEach(function (cls) {\n      if (cls.trim()) {\n        el.classList.add(cls);\n      }\n    });\n  } else {\n    removeClass(el, name);\n    var cls = getClassName(el) + (' ' + name);\n    setClassName(el, cls);\n  }\n}\n\nfunction hasClass(el, name) {\n  if (typeof el.classList !== 'undefined') {\n    return el.classList.contains(name);\n  }\n  var className = getClassName(el);\n  return new RegExp('(^| )' + name + '( |$)', 'gi').test(className);\n}\n\nfunction getClassName(el) {\n  // Can't use just SVGAnimatedString here since nodes within a Frame in IE have\n  // completely separately SVGAnimatedString base classes\n  if (el.className instanceof el.ownerDocument.defaultView.SVGAnimatedString) {\n    return el.className.baseVal;\n  }\n  return el.className;\n}\n\nfunction setClassName(el, className) {\n  el.setAttribute('class', className);\n}\n\nfunction updateClasses(el, add, all) {\n  // Of the set of 'all' classes, we need the 'add' classes, and only the\n  // 'add' classes to be set.\n  all.forEach(function (cls) {\n    if (add.indexOf(cls) === -1 && hasClass(el, cls)) {\n      removeClass(el, cls);\n    }\n  });\n\n  add.forEach(function (cls) {\n    if (!hasClass(el, cls)) {\n      addClass(el, cls);\n    }\n  });\n}\n\nvar deferred = [];\n\nvar defer = function defer(fn) {\n  deferred.push(fn);\n};\n\nvar flush = function flush() {\n  var fn = undefined;\n  while (fn = deferred.pop()) {\n    fn();\n  }\n};\n\nvar Evented = (function () {\n  function Evented() {\n    _classCallCheck(this, Evented);\n  }\n\n  _createClass(Evented, [{\n    key: 'on',\n    value: function on(event, handler, ctx) {\n      var once = arguments.length <= 3 || arguments[3] === undefined ? false : arguments[3];\n\n      if (typeof this.bindings === 'undefined') {\n        this.bindings = {};\n      }\n      if (typeof this.bindings[event] === 'undefined') {\n        this.bindings[event] = [];\n      }\n      this.bindings[event].push({ handler: handler, ctx: ctx, once: once });\n    }\n  }, {\n    key: 'once',\n    value: function once(event, handler, ctx) {\n      this.on(event, handler, ctx, true);\n    }\n  }, {\n    key: 'off',\n    value: function off(event, handler) {\n      if (typeof this.bindings === 'undefined' || typeof this.bindings[event] === 'undefined') {\n        return;\n      }\n\n      if (typeof handler === 'undefined') {\n        delete this.bindings[event];\n      } else {\n        var i = 0;\n        while (i < this.bindings[event].length) {\n          if (this.bindings[event][i].handler === handler) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'trigger',\n    value: function trigger(event) {\n      if (typeof this.bindings !== 'undefined' && this.bindings[event]) {\n        var i = 0;\n\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        while (i < this.bindings[event].length) {\n          var _bindings$event$i = this.bindings[event][i];\n          var handler = _bindings$event$i.handler;\n          var ctx = _bindings$event$i.ctx;\n          var once = _bindings$event$i.once;\n\n          var context = ctx;\n          if (typeof context === 'undefined') {\n            context = this;\n          }\n\n          handler.apply(context, args);\n\n          if (once) {\n            this.bindings[event].splice(i, 1);\n          } else {\n            ++i;\n          }\n        }\n      }\n    }\n  }]);\n\n  return Evented;\n})();\n\nTetherBase.Utils = {\n  getActualBoundingClientRect: getActualBoundingClientRect,\n  getScrollParents: getScrollParents,\n  getBounds: getBounds,\n  getOffsetParent: getOffsetParent,\n  extend: extend,\n  addClass: addClass,\n  removeClass: removeClass,\n  hasClass: hasClass,\n  updateClasses: updateClasses,\n  defer: defer,\n  flush: flush,\n  uniqueId: uniqueId,\n  Evented: Evented,\n  getScrollBarSize: getScrollBarSize,\n  removeUtilElements: removeUtilElements\n};\n/* globals TetherBase, performance */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _get = function get(_x6, _x7, _x8) { var _again = true; _function: while (_again) { var object = _x6, property = _x7, receiver = _x8; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x6 = parent; _x7 = property; _x8 = receiver; _again = true; desc = parent = undefined; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nif (typeof TetherBase === 'undefined') {\n  throw new Error('You must include the utils.js file before tether.js');\n}\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getScrollParents = _TetherBase$Utils.getScrollParents;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar getOffsetParent = _TetherBase$Utils.getOffsetParent;\nvar extend = _TetherBase$Utils.extend;\nvar addClass = _TetherBase$Utils.addClass;\nvar removeClass = _TetherBase$Utils.removeClass;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\nvar flush = _TetherBase$Utils.flush;\nvar getScrollBarSize = _TetherBase$Utils.getScrollBarSize;\nvar removeUtilElements = _TetherBase$Utils.removeUtilElements;\n\nfunction within(a, b) {\n  var diff = arguments.length <= 2 || arguments[2] === undefined ? 1 : arguments[2];\n\n  return a + diff >= b && b >= a - diff;\n}\n\nvar transformKey = (function () {\n  if (typeof document === 'undefined') {\n    return '';\n  }\n  var el = document.createElement('div');\n\n  var transforms = ['transform', 'WebkitTransform', 'OTransform', 'MozTransform', 'msTransform'];\n  for (var i = 0; i < transforms.length; ++i) {\n    var key = transforms[i];\n    if (el.style[key] !== undefined) {\n      return key;\n    }\n  }\n})();\n\nvar tethers = [];\n\nvar position = function position() {\n  tethers.forEach(function (tether) {\n    tether.position(false);\n  });\n  flush();\n};\n\nfunction now() {\n  if (typeof performance === 'object' && typeof performance.now === 'function') {\n    return performance.now();\n  }\n  return +new Date();\n}\n\n(function () {\n  var lastCall = null;\n  var lastDuration = null;\n  var pendingTimeout = null;\n\n  var tick = function tick() {\n    if (typeof lastDuration !== 'undefined' && lastDuration > 16) {\n      // We voluntarily throttle ourselves if we can't manage 60fps\n      lastDuration = Math.min(lastDuration - 16, 250);\n\n      // Just in case this is the last event, remember to position just once more\n      pendingTimeout = setTimeout(tick, 250);\n      return;\n    }\n\n    if (typeof lastCall !== 'undefined' && now() - lastCall < 10) {\n      // Some browsers call events a little too frequently, refuse to run more than is reasonable\n      return;\n    }\n\n    if (pendingTimeout != null) {\n      clearTimeout(pendingTimeout);\n      pendingTimeout = null;\n    }\n\n    lastCall = now();\n    position();\n    lastDuration = now() - lastCall;\n  };\n\n  if (typeof window !== 'undefined' && typeof window.addEventListener !== 'undefined') {\n    ['resize', 'scroll', 'touchmove'].forEach(function (event) {\n      window.addEventListener(event, tick);\n    });\n  }\n})();\n\nvar MIRROR_LR = {\n  center: 'center',\n  left: 'right',\n  right: 'left'\n};\n\nvar MIRROR_TB = {\n  middle: 'middle',\n  top: 'bottom',\n  bottom: 'top'\n};\n\nvar OFFSET_MAP = {\n  top: 0,\n  left: 0,\n  middle: '50%',\n  center: '50%',\n  bottom: '100%',\n  right: '100%'\n};\n\nvar autoToFixedAttachment = function autoToFixedAttachment(attachment, relativeToAttachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (left === 'auto') {\n    left = MIRROR_LR[relativeToAttachment.left];\n  }\n\n  if (top === 'auto') {\n    top = MIRROR_TB[relativeToAttachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nvar attachmentToOffset = function attachmentToOffset(attachment) {\n  var left = attachment.left;\n  var top = attachment.top;\n\n  if (typeof OFFSET_MAP[attachment.left] !== 'undefined') {\n    left = OFFSET_MAP[attachment.left];\n  }\n\n  if (typeof OFFSET_MAP[attachment.top] !== 'undefined') {\n    top = OFFSET_MAP[attachment.top];\n  }\n\n  return { left: left, top: top };\n};\n\nfunction addOffset() {\n  var out = { top: 0, left: 0 };\n\n  for (var _len = arguments.length, offsets = Array(_len), _key = 0; _key < _len; _key++) {\n    offsets[_key] = arguments[_key];\n  }\n\n  offsets.forEach(function (_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (typeof top === 'string') {\n      top = parseFloat(top, 10);\n    }\n    if (typeof left === 'string') {\n      left = parseFloat(left, 10);\n    }\n\n    out.top += top;\n    out.left += left;\n  });\n\n  return out;\n}\n\nfunction offsetToPx(offset, size) {\n  if (typeof offset.left === 'string' && offset.left.indexOf('%') !== -1) {\n    offset.left = parseFloat(offset.left, 10) / 100 * size.width;\n  }\n  if (typeof offset.top === 'string' && offset.top.indexOf('%') !== -1) {\n    offset.top = parseFloat(offset.top, 10) / 100 * size.height;\n  }\n\n  return offset;\n}\n\nvar parseOffset = function parseOffset(value) {\n  var _value$split = value.split(' ');\n\n  var _value$split2 = _slicedToArray(_value$split, 2);\n\n  var top = _value$split2[0];\n  var left = _value$split2[1];\n\n  return { top: top, left: left };\n};\nvar parseAttachment = parseOffset;\n\nvar TetherClass = (function (_Evented) {\n  _inherits(TetherClass, _Evented);\n\n  function TetherClass(options) {\n    var _this = this;\n\n    _classCallCheck(this, TetherClass);\n\n    _get(Object.getPrototypeOf(TetherClass.prototype), 'constructor', this).call(this);\n    this.position = this.position.bind(this);\n\n    tethers.push(this);\n\n    this.history = [];\n\n    this.setOptions(options, false);\n\n    TetherBase.modules.forEach(function (module) {\n      if (typeof module.initialize !== 'undefined') {\n        module.initialize.call(_this);\n      }\n    });\n\n    this.position();\n  }\n\n  _createClass(TetherClass, [{\n    key: 'getClass',\n    value: function getClass() {\n      var key = arguments.length <= 0 || arguments[0] === undefined ? '' : arguments[0];\n      var classes = this.options.classes;\n\n      if (typeof classes !== 'undefined' && classes[key]) {\n        return this.options.classes[key];\n      } else if (this.options.classPrefix) {\n        return this.options.classPrefix + '-' + key;\n      } else {\n        return key;\n      }\n    }\n  }, {\n    key: 'setOptions',\n    value: function setOptions(options) {\n      var _this2 = this;\n\n      var pos = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n      var defaults = {\n        offset: '0 0',\n        targetOffset: '0 0',\n        targetAttachment: 'auto auto',\n        classPrefix: 'tether'\n      };\n\n      this.options = extend(defaults, options);\n\n      var _options = this.options;\n      var element = _options.element;\n      var target = _options.target;\n      var targetModifier = _options.targetModifier;\n\n      this.element = element;\n      this.target = target;\n      this.targetModifier = targetModifier;\n\n      if (this.target === 'viewport') {\n        this.target = document.body;\n        this.targetModifier = 'visible';\n      } else if (this.target === 'scroll-handle') {\n        this.target = document.body;\n        this.targetModifier = 'scroll-handle';\n      }\n\n      ['element', 'target'].forEach(function (key) {\n        if (typeof _this2[key] === 'undefined') {\n          throw new Error('Tether Error: Both element and target must be defined');\n        }\n\n        if (typeof _this2[key].jquery !== 'undefined') {\n          _this2[key] = _this2[key][0];\n        } else if (typeof _this2[key] === 'string') {\n          _this2[key] = document.querySelector(_this2[key]);\n        }\n      });\n\n      addClass(this.element, this.getClass('element'));\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('target'));\n      }\n\n      if (!this.options.attachment) {\n        throw new Error('Tether Error: You must provide an attachment');\n      }\n\n      this.targetAttachment = parseAttachment(this.options.targetAttachment);\n      this.attachment = parseAttachment(this.options.attachment);\n      this.offset = parseOffset(this.options.offset);\n      this.targetOffset = parseOffset(this.options.targetOffset);\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.disable();\n      }\n\n      if (this.targetModifier === 'scroll-handle') {\n        this.scrollParents = [this.target];\n      } else {\n        this.scrollParents = getScrollParents(this.target);\n      }\n\n      if (!(this.options.enabled === false)) {\n        this.enable(pos);\n      }\n    }\n  }, {\n    key: 'getTargetBounds',\n    value: function getTargetBounds() {\n      if (typeof this.targetModifier !== 'undefined') {\n        if (this.targetModifier === 'visible') {\n          if (this.target === document.body) {\n            return { top: pageYOffset, left: pageXOffset, height: innerHeight, width: innerWidth };\n          } else {\n            var bounds = getBounds(this.target);\n\n            var out = {\n              height: bounds.height,\n              width: bounds.width,\n              top: bounds.top,\n              left: bounds.left\n            };\n\n            out.height = Math.min(out.height, bounds.height - (pageYOffset - bounds.top));\n            out.height = Math.min(out.height, bounds.height - (bounds.top + bounds.height - (pageYOffset + innerHeight)));\n            out.height = Math.min(innerHeight, out.height);\n            out.height -= 2;\n\n            out.width = Math.min(out.width, bounds.width - (pageXOffset - bounds.left));\n            out.width = Math.min(out.width, bounds.width - (bounds.left + bounds.width - (pageXOffset + innerWidth)));\n            out.width = Math.min(innerWidth, out.width);\n            out.width -= 2;\n\n            if (out.top < pageYOffset) {\n              out.top = pageYOffset;\n            }\n            if (out.left < pageXOffset) {\n              out.left = pageXOffset;\n            }\n\n            return out;\n          }\n        } else if (this.targetModifier === 'scroll-handle') {\n          var bounds = undefined;\n          var target = this.target;\n          if (target === document.body) {\n            target = document.documentElement;\n\n            bounds = {\n              left: pageXOffset,\n              top: pageYOffset,\n              height: innerHeight,\n              width: innerWidth\n            };\n          } else {\n            bounds = getBounds(target);\n          }\n\n          var style = getComputedStyle(target);\n\n          var hasBottomScroll = target.scrollWidth > target.clientWidth || [style.overflow, style.overflowX].indexOf('scroll') >= 0 || this.target !== document.body;\n\n          var scrollBottom = 0;\n          if (hasBottomScroll) {\n            scrollBottom = 15;\n          }\n\n          var height = bounds.height - parseFloat(style.borderTopWidth) - parseFloat(style.borderBottomWidth) - scrollBottom;\n\n          var out = {\n            width: 15,\n            height: height * 0.975 * (height / target.scrollHeight),\n            left: bounds.left + bounds.width - parseFloat(style.borderLeftWidth) - 15\n          };\n\n          var fitAdj = 0;\n          if (height < 408 && this.target === document.body) {\n            fitAdj = -0.00011 * Math.pow(height, 2) - 0.00727 * height + 22.58;\n          }\n\n          if (this.target !== document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          var scrollPercentage = this.target.scrollTop / (target.scrollHeight - height);\n          out.top = scrollPercentage * (height - out.height - fitAdj) + bounds.top + parseFloat(style.borderTopWidth);\n\n          if (this.target === document.body) {\n            out.height = Math.max(out.height, 24);\n          }\n\n          return out;\n        }\n      } else {\n        return getBounds(this.target);\n      }\n    }\n  }, {\n    key: 'clearCache',\n    value: function clearCache() {\n      this._cache = {};\n    }\n  }, {\n    key: 'cache',\n    value: function cache(k, getter) {\n      // More than one module will often need the same DOM info, so\n      // we keep a cache which is cleared on each position call\n      if (typeof this._cache === 'undefined') {\n        this._cache = {};\n      }\n\n      if (typeof this._cache[k] === 'undefined') {\n        this._cache[k] = getter.call(this);\n      }\n\n      return this._cache[k];\n    }\n  }, {\n    key: 'enable',\n    value: function enable() {\n      var _this3 = this;\n\n      var pos = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      if (!(this.options.addTargetClasses === false)) {\n        addClass(this.target, this.getClass('enabled'));\n      }\n      addClass(this.element, this.getClass('enabled'));\n      this.enabled = true;\n\n      this.scrollParents.forEach(function (parent) {\n        if (parent !== _this3.target.ownerDocument) {\n          parent.addEventListener('scroll', _this3.position);\n        }\n      });\n\n      if (pos) {\n        this.position();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      var _this4 = this;\n\n      removeClass(this.target, this.getClass('enabled'));\n      removeClass(this.element, this.getClass('enabled'));\n      this.enabled = false;\n\n      if (typeof this.scrollParents !== 'undefined') {\n        this.scrollParents.forEach(function (parent) {\n          parent.removeEventListener('scroll', _this4.position);\n        });\n      }\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy() {\n      var _this5 = this;\n\n      this.disable();\n\n      tethers.forEach(function (tether, i) {\n        if (tether === _this5) {\n          tethers.splice(i, 1);\n        }\n      });\n\n      // Remove any elements we were using for convenience from the DOM\n      if (tethers.length === 0) {\n        removeUtilElements();\n      }\n    }\n  }, {\n    key: 'updateAttachClasses',\n    value: function updateAttachClasses(elementAttach, targetAttach) {\n      var _this6 = this;\n\n      elementAttach = elementAttach || this.attachment;\n      targetAttach = targetAttach || this.targetAttachment;\n      var sides = ['left', 'top', 'bottom', 'right', 'middle', 'center'];\n\n      if (typeof this._addAttachClasses !== 'undefined' && this._addAttachClasses.length) {\n        // updateAttachClasses can be called more than once in a position call, so\n        // we need to clean up after ourselves such that when the last defer gets\n        // ran it doesn't add any extra classes from previous calls.\n        this._addAttachClasses.splice(0, this._addAttachClasses.length);\n      }\n\n      if (typeof this._addAttachClasses === 'undefined') {\n        this._addAttachClasses = [];\n      }\n      var add = this._addAttachClasses;\n\n      if (elementAttach.top) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.top);\n      }\n      if (elementAttach.left) {\n        add.push(this.getClass('element-attached') + '-' + elementAttach.left);\n      }\n      if (targetAttach.top) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.top);\n      }\n      if (targetAttach.left) {\n        add.push(this.getClass('target-attached') + '-' + targetAttach.left);\n      }\n\n      var all = [];\n      sides.forEach(function (side) {\n        all.push(_this6.getClass('element-attached') + '-' + side);\n        all.push(_this6.getClass('target-attached') + '-' + side);\n      });\n\n      defer(function () {\n        if (!(typeof _this6._addAttachClasses !== 'undefined')) {\n          return;\n        }\n\n        updateClasses(_this6.element, _this6._addAttachClasses, all);\n        if (!(_this6.options.addTargetClasses === false)) {\n          updateClasses(_this6.target, _this6._addAttachClasses, all);\n        }\n\n        delete _this6._addAttachClasses;\n      });\n    }\n  }, {\n    key: 'position',\n    value: function position() {\n      var _this7 = this;\n\n      var flushChanges = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\n      // flushChanges commits the changes immediately, leave true unless you are positioning multiple\n      // tethers (in which case call Tether.Utils.flush yourself when you're done)\n\n      if (!this.enabled) {\n        return;\n      }\n\n      this.clearCache();\n\n      // Turn 'auto' attachments into the appropriate corner or edge\n      var targetAttachment = autoToFixedAttachment(this.targetAttachment, this.attachment);\n\n      this.updateAttachClasses(this.attachment, targetAttachment);\n\n      var elementPos = this.cache('element-bounds', function () {\n        return getBounds(_this7.element);\n      });\n\n      var width = elementPos.width;\n      var height = elementPos.height;\n\n      if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n        var _lastSize = this.lastSize;\n\n        // We cache the height and width to make it possible to position elements that are\n        // getting hidden.\n        width = _lastSize.width;\n        height = _lastSize.height;\n      } else {\n        this.lastSize = { width: width, height: height };\n      }\n\n      var targetPos = this.cache('target-bounds', function () {\n        return _this7.getTargetBounds();\n      });\n      var targetSize = targetPos;\n\n      // Get an actual px offset from the attachment\n      var offset = offsetToPx(attachmentToOffset(this.attachment), { width: width, height: height });\n      var targetOffset = offsetToPx(attachmentToOffset(targetAttachment), targetSize);\n\n      var manualOffset = offsetToPx(this.offset, { width: width, height: height });\n      var manualTargetOffset = offsetToPx(this.targetOffset, targetSize);\n\n      // Add the manually provided offset\n      offset = addOffset(offset, manualOffset);\n      targetOffset = addOffset(targetOffset, manualTargetOffset);\n\n      // It's now our goal to make (element position + offset) == (target position + target offset)\n      var left = targetPos.left + targetOffset.left - offset.left;\n      var top = targetPos.top + targetOffset.top - offset.top;\n\n      for (var i = 0; i < TetherBase.modules.length; ++i) {\n        var _module2 = TetherBase.modules[i];\n        var ret = _module2.position.call(this, {\n          left: left,\n          top: top,\n          targetAttachment: targetAttachment,\n          targetPos: targetPos,\n          elementPos: elementPos,\n          offset: offset,\n          targetOffset: targetOffset,\n          manualOffset: manualOffset,\n          manualTargetOffset: manualTargetOffset,\n          scrollbarSize: scrollbarSize,\n          attachment: this.attachment\n        });\n\n        if (ret === false) {\n          return false;\n        } else if (typeof ret === 'undefined' || typeof ret !== 'object') {\n          continue;\n        } else {\n          top = ret.top;\n          left = ret.left;\n        }\n      }\n\n      // We describe the position three different ways to give the optimizer\n      // a chance to decide the best possible way to position the element\n      // with the fewest repaints.\n      var next = {\n        // It's position relative to the page (absolute positioning when\n        // the element is a child of the body)\n        page: {\n          top: top,\n          left: left\n        },\n\n        // It's position relative to the viewport (fixed positioning)\n        viewport: {\n          top: top - pageYOffset,\n          bottom: pageYOffset - top - height + innerHeight,\n          left: left - pageXOffset,\n          right: pageXOffset - left - width + innerWidth\n        }\n      };\n\n      var doc = this.target.ownerDocument;\n      var win = doc.defaultView;\n\n      var scrollbarSize = undefined;\n      if (win.innerHeight > doc.documentElement.clientHeight) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.bottom -= scrollbarSize.height;\n      }\n\n      if (win.innerWidth > doc.documentElement.clientWidth) {\n        scrollbarSize = this.cache('scrollbar-size', getScrollBarSize);\n        next.viewport.right -= scrollbarSize.width;\n      }\n\n      if (['', 'static'].indexOf(doc.body.style.position) === -1 || ['', 'static'].indexOf(doc.body.parentElement.style.position) === -1) {\n        // Absolute positioning in the body will be relative to the page, not the 'initial containing block'\n        next.page.bottom = doc.body.scrollHeight - top - height;\n        next.page.right = doc.body.scrollWidth - left - width;\n      }\n\n      if (typeof this.options.optimizations !== 'undefined' && this.options.optimizations.moveElement !== false && !(typeof this.targetModifier !== 'undefined')) {\n        (function () {\n          var offsetParent = _this7.cache('target-offsetparent', function () {\n            return getOffsetParent(_this7.target);\n          });\n          var offsetPosition = _this7.cache('target-offsetparent-bounds', function () {\n            return getBounds(offsetParent);\n          });\n          var offsetParentStyle = getComputedStyle(offsetParent);\n          var offsetParentSize = offsetPosition;\n\n          var offsetBorder = {};\n          ['Top', 'Left', 'Bottom', 'Right'].forEach(function (side) {\n            offsetBorder[side.toLowerCase()] = parseFloat(offsetParentStyle['border' + side + 'Width']);\n          });\n\n          offsetPosition.right = doc.body.scrollWidth - offsetPosition.left - offsetParentSize.width + offsetBorder.right;\n          offsetPosition.bottom = doc.body.scrollHeight - offsetPosition.top - offsetParentSize.height + offsetBorder.bottom;\n\n          if (next.page.top >= offsetPosition.top + offsetBorder.top && next.page.bottom >= offsetPosition.bottom) {\n            if (next.page.left >= offsetPosition.left + offsetBorder.left && next.page.right >= offsetPosition.right) {\n              // We're within the visible part of the target's scroll parent\n              var scrollTop = offsetParent.scrollTop;\n              var scrollLeft = offsetParent.scrollLeft;\n\n              // It's position relative to the target's offset parent (absolute positioning when\n              // the element is moved to be a child of the target's offset parent).\n              next.offset = {\n                top: next.page.top - offsetPosition.top + scrollTop - offsetBorder.top,\n                left: next.page.left - offsetPosition.left + scrollLeft - offsetBorder.left\n              };\n            }\n          }\n        })();\n      }\n\n      // We could also travel up the DOM and try each containing context, rather than only\n      // looking at the body, but we're gonna get diminishing returns.\n\n      this.move(next);\n\n      this.history.unshift(next);\n\n      if (this.history.length > 3) {\n        this.history.pop();\n      }\n\n      if (flushChanges) {\n        flush();\n      }\n\n      return true;\n    }\n\n    // THE ISSUE\n  }, {\n    key: 'move',\n    value: function move(pos) {\n      var _this8 = this;\n\n      if (!(typeof this.element.parentNode !== 'undefined')) {\n        return;\n      }\n\n      var same = {};\n\n      for (var type in pos) {\n        same[type] = {};\n\n        for (var key in pos[type]) {\n          var found = false;\n\n          for (var i = 0; i < this.history.length; ++i) {\n            var point = this.history[i];\n            if (typeof point[type] !== 'undefined' && !within(point[type][key], pos[type][key])) {\n              found = true;\n              break;\n            }\n          }\n\n          if (!found) {\n            same[type][key] = true;\n          }\n        }\n      }\n\n      var css = { top: '', left: '', right: '', bottom: '' };\n\n      var transcribe = function transcribe(_same, _pos) {\n        var hasOptimizations = typeof _this8.options.optimizations !== 'undefined';\n        var gpu = hasOptimizations ? _this8.options.optimizations.gpu : null;\n        if (gpu !== false) {\n          var yPos = undefined,\n              xPos = undefined;\n          if (_same.top) {\n            css.top = 0;\n            yPos = _pos.top;\n          } else {\n            css.bottom = 0;\n            yPos = -_pos.bottom;\n          }\n\n          if (_same.left) {\n            css.left = 0;\n            xPos = _pos.left;\n          } else {\n            css.right = 0;\n            xPos = -_pos.right;\n          }\n\n          if (typeof window.devicePixelRatio === 'number' && devicePixelRatio % 1 === 0) {\n            xPos = Math.round(xPos * devicePixelRatio) / devicePixelRatio;\n            yPos = Math.round(yPos * devicePixelRatio) / devicePixelRatio;\n          }\n\n          css[transformKey] = 'translateX(' + xPos + 'px) translateY(' + yPos + 'px)';\n\n          if (transformKey !== 'msTransform') {\n            // The Z transform will keep this in the GPU (faster, and prevents artifacts),\n            // but IE9 doesn't support 3d transforms and will choke.\n            css[transformKey] += \" translateZ(0)\";\n          }\n        } else {\n          if (_same.top) {\n            css.top = _pos.top + 'px';\n          } else {\n            css.bottom = _pos.bottom + 'px';\n          }\n\n          if (_same.left) {\n            css.left = _pos.left + 'px';\n          } else {\n            css.right = _pos.right + 'px';\n          }\n        }\n      };\n\n      var moved = false;\n      if ((same.page.top || same.page.bottom) && (same.page.left || same.page.right)) {\n        css.position = 'absolute';\n        transcribe(same.page, pos.page);\n      } else if ((same.viewport.top || same.viewport.bottom) && (same.viewport.left || same.viewport.right)) {\n        css.position = 'fixed';\n        transcribe(same.viewport, pos.viewport);\n      } else if (typeof same.offset !== 'undefined' && same.offset.top && same.offset.left) {\n        (function () {\n          css.position = 'absolute';\n          var offsetParent = _this8.cache('target-offsetparent', function () {\n            return getOffsetParent(_this8.target);\n          });\n\n          if (getOffsetParent(_this8.element) !== offsetParent) {\n            defer(function () {\n              _this8.element.parentNode.removeChild(_this8.element);\n              offsetParent.appendChild(_this8.element);\n            });\n          }\n\n          transcribe(same.offset, pos.offset);\n          moved = true;\n        })();\n      } else {\n        css.position = 'absolute';\n        transcribe({ top: true, left: true }, pos.page);\n      }\n\n      if (!moved) {\n        if (this.options.bodyElement) {\n          if (this.element.parentNode !== this.options.bodyElement) {\n            this.options.bodyElement.appendChild(this.element);\n          }\n        } else {\n          var isFullscreenElement = function isFullscreenElement(e) {\n            var d = e.ownerDocument;\n            var fe = d.fullscreenElement || d.webkitFullscreenElement || d.mozFullScreenElement || d.msFullscreenElement;\n            return fe === e;\n          };\n\n          var offsetParentIsBody = true;\n\n          var currentNode = this.element.parentNode;\n          while (currentNode && currentNode.nodeType === 1 && currentNode.tagName !== 'BODY' && !isFullscreenElement(currentNode)) {\n            if (getComputedStyle(currentNode).position !== 'static') {\n              offsetParentIsBody = false;\n              break;\n            }\n\n            currentNode = currentNode.parentNode;\n          }\n\n          if (!offsetParentIsBody) {\n            this.element.parentNode.removeChild(this.element);\n            this.element.ownerDocument.body.appendChild(this.element);\n          }\n        }\n      }\n\n      // Any css change will trigger a repaint, so let's avoid one if nothing changed\n      var writeCSS = {};\n      var write = false;\n      for (var key in css) {\n        var val = css[key];\n        var elVal = this.element.style[key];\n\n        if (elVal !== val) {\n          write = true;\n          writeCSS[key] = val;\n        }\n      }\n\n      if (write) {\n        defer(function () {\n          extend(_this8.element.style, writeCSS);\n          _this8.trigger('repositioned');\n        });\n      }\n    }\n  }]);\n\n  return TetherClass;\n})(Evented);\n\nTetherClass.modules = [];\n\nTetherBase.position = position;\n\nvar Tether = extend(TetherClass, TetherBase);\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar extend = _TetherBase$Utils.extend;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nvar BOUNDS_FORMAT = ['left', 'top', 'right', 'bottom'];\n\nfunction getBoundingRect(tether, to) {\n  if (to === 'scrollParent') {\n    to = tether.scrollParents[0];\n  } else if (to === 'window') {\n    to = [pageXOffset, pageYOffset, innerWidth + pageXOffset, innerHeight + pageYOffset];\n  }\n\n  if (to === document) {\n    to = to.documentElement;\n  }\n\n  if (typeof to.nodeType !== 'undefined') {\n    (function () {\n      var node = to;\n      var size = getBounds(to);\n      var pos = size;\n      var style = getComputedStyle(to);\n\n      to = [pos.left, pos.top, size.width + pos.left, size.height + pos.top];\n\n      // Account any parent Frames scroll offset\n      if (node.ownerDocument !== document) {\n        var win = node.ownerDocument.defaultView;\n        to[0] += win.pageXOffset;\n        to[1] += win.pageYOffset;\n        to[2] += win.pageXOffset;\n        to[3] += win.pageYOffset;\n      }\n\n      BOUNDS_FORMAT.forEach(function (side, i) {\n        side = side[0].toUpperCase() + side.substr(1);\n        if (side === 'Top' || side === 'Left') {\n          to[i] += parseFloat(style['border' + side + 'Width']);\n        } else {\n          to[i] -= parseFloat(style['border' + side + 'Width']);\n        }\n      });\n    })();\n  }\n\n  return to;\n}\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n    var targetAttachment = _ref.targetAttachment;\n\n    if (!this.options.constraints) {\n      return true;\n    }\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    if (width === 0 && height === 0 && typeof this.lastSize !== 'undefined') {\n      var _lastSize = this.lastSize;\n\n      // Handle the item getting hidden as a result of our positioning without glitching\n      // the classes in and out\n      width = _lastSize.width;\n      height = _lastSize.height;\n    }\n\n    var targetSize = this.cache('target-bounds', function () {\n      return _this.getTargetBounds();\n    });\n\n    var targetHeight = targetSize.height;\n    var targetWidth = targetSize.width;\n\n    var allClasses = [this.getClass('pinned'), this.getClass('out-of-bounds')];\n\n    this.options.constraints.forEach(function (constraint) {\n      var outOfBoundsClass = constraint.outOfBoundsClass;\n      var pinnedClass = constraint.pinnedClass;\n\n      if (outOfBoundsClass) {\n        allClasses.push(outOfBoundsClass);\n      }\n      if (pinnedClass) {\n        allClasses.push(pinnedClass);\n      }\n    });\n\n    allClasses.forEach(function (cls) {\n      ['left', 'top', 'right', 'bottom'].forEach(function (side) {\n        allClasses.push(cls + '-' + side);\n      });\n    });\n\n    var addClasses = [];\n\n    var tAttachment = extend({}, targetAttachment);\n    var eAttachment = extend({}, this.attachment);\n\n    this.options.constraints.forEach(function (constraint) {\n      var to = constraint.to;\n      var attachment = constraint.attachment;\n      var pin = constraint.pin;\n\n      if (typeof attachment === 'undefined') {\n        attachment = '';\n      }\n\n      var changeAttachX = undefined,\n          changeAttachY = undefined;\n      if (attachment.indexOf(' ') >= 0) {\n        var _attachment$split = attachment.split(' ');\n\n        var _attachment$split2 = _slicedToArray(_attachment$split, 2);\n\n        changeAttachY = _attachment$split2[0];\n        changeAttachX = _attachment$split2[1];\n      } else {\n        changeAttachX = changeAttachY = attachment;\n      }\n\n      var bounds = getBoundingRect(_this, to);\n\n      if (changeAttachY === 'target' || changeAttachY === 'both') {\n        if (top < bounds[1] && tAttachment.top === 'top') {\n          top += targetHeight;\n          tAttachment.top = 'bottom';\n        }\n\n        if (top + height > bounds[3] && tAttachment.top === 'bottom') {\n          top -= targetHeight;\n          tAttachment.top = 'top';\n        }\n      }\n\n      if (changeAttachY === 'together') {\n        if (tAttachment.top === 'top') {\n          if (eAttachment.top === 'bottom' && top < bounds[1]) {\n            top += targetHeight;\n            tAttachment.top = 'bottom';\n\n            top += height;\n            eAttachment.top = 'top';\n          } else if (eAttachment.top === 'top' && top + height > bounds[3] && top - (height - targetHeight) >= bounds[1]) {\n            top -= height - targetHeight;\n            tAttachment.top = 'bottom';\n\n            eAttachment.top = 'bottom';\n          }\n        }\n\n        if (tAttachment.top === 'bottom') {\n          if (eAttachment.top === 'top' && top + height > bounds[3]) {\n            top -= targetHeight;\n            tAttachment.top = 'top';\n\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (eAttachment.top === 'bottom' && top < bounds[1] && top + (height * 2 - targetHeight) <= bounds[3]) {\n            top += height - targetHeight;\n            tAttachment.top = 'top';\n\n            eAttachment.top = 'top';\n          }\n        }\n\n        if (tAttachment.top === 'middle') {\n          if (top + height > bounds[3] && eAttachment.top === 'top') {\n            top -= height;\n            eAttachment.top = 'bottom';\n          } else if (top < bounds[1] && eAttachment.top === 'bottom') {\n            top += height;\n            eAttachment.top = 'top';\n          }\n        }\n      }\n\n      if (changeAttachX === 'target' || changeAttachX === 'both') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          left += targetWidth;\n          tAttachment.left = 'right';\n        }\n\n        if (left + width > bounds[2] && tAttachment.left === 'right') {\n          left -= targetWidth;\n          tAttachment.left = 'left';\n        }\n      }\n\n      if (changeAttachX === 'together') {\n        if (left < bounds[0] && tAttachment.left === 'left') {\n          if (eAttachment.left === 'right') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'left') {\n            left += targetWidth;\n            tAttachment.left = 'right';\n\n            left -= width;\n            eAttachment.left = 'right';\n          }\n        } else if (left + width > bounds[2] && tAttachment.left === 'right') {\n          if (eAttachment.left === 'left') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'right') {\n            left -= targetWidth;\n            tAttachment.left = 'left';\n\n            left += width;\n            eAttachment.left = 'left';\n          }\n        } else if (tAttachment.left === 'center') {\n          if (left + width > bounds[2] && eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (left < bounds[0] && eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          }\n        }\n      }\n\n      if (changeAttachY === 'element' || changeAttachY === 'both') {\n        if (top < bounds[1] && eAttachment.top === 'bottom') {\n          top += height;\n          eAttachment.top = 'top';\n        }\n\n        if (top + height > bounds[3] && eAttachment.top === 'top') {\n          top -= height;\n          eAttachment.top = 'bottom';\n        }\n      }\n\n      if (changeAttachX === 'element' || changeAttachX === 'both') {\n        if (left < bounds[0]) {\n          if (eAttachment.left === 'right') {\n            left += width;\n            eAttachment.left = 'left';\n          } else if (eAttachment.left === 'center') {\n            left += width / 2;\n            eAttachment.left = 'left';\n          }\n        }\n\n        if (left + width > bounds[2]) {\n          if (eAttachment.left === 'left') {\n            left -= width;\n            eAttachment.left = 'right';\n          } else if (eAttachment.left === 'center') {\n            left -= width / 2;\n            eAttachment.left = 'right';\n          }\n        }\n      }\n\n      if (typeof pin === 'string') {\n        pin = pin.split(',').map(function (p) {\n          return p.trim();\n        });\n      } else if (pin === true) {\n        pin = ['top', 'left', 'right', 'bottom'];\n      }\n\n      pin = pin || [];\n\n      var pinned = [];\n      var oob = [];\n\n      if (top < bounds[1]) {\n        if (pin.indexOf('top') >= 0) {\n          top = bounds[1];\n          pinned.push('top');\n        } else {\n          oob.push('top');\n        }\n      }\n\n      if (top + height > bounds[3]) {\n        if (pin.indexOf('bottom') >= 0) {\n          top = bounds[3] - height;\n          pinned.push('bottom');\n        } else {\n          oob.push('bottom');\n        }\n      }\n\n      if (left < bounds[0]) {\n        if (pin.indexOf('left') >= 0) {\n          left = bounds[0];\n          pinned.push('left');\n        } else {\n          oob.push('left');\n        }\n      }\n\n      if (left + width > bounds[2]) {\n        if (pin.indexOf('right') >= 0) {\n          left = bounds[2] - width;\n          pinned.push('right');\n        } else {\n          oob.push('right');\n        }\n      }\n\n      if (pinned.length) {\n        (function () {\n          var pinnedClass = undefined;\n          if (typeof _this.options.pinnedClass !== 'undefined') {\n            pinnedClass = _this.options.pinnedClass;\n          } else {\n            pinnedClass = _this.getClass('pinned');\n          }\n\n          addClasses.push(pinnedClass);\n          pinned.forEach(function (side) {\n            addClasses.push(pinnedClass + '-' + side);\n          });\n        })();\n      }\n\n      if (oob.length) {\n        (function () {\n          var oobClass = undefined;\n          if (typeof _this.options.outOfBoundsClass !== 'undefined') {\n            oobClass = _this.options.outOfBoundsClass;\n          } else {\n            oobClass = _this.getClass('out-of-bounds');\n          }\n\n          addClasses.push(oobClass);\n          oob.forEach(function (side) {\n            addClasses.push(oobClass + '-' + side);\n          });\n        })();\n      }\n\n      if (pinned.indexOf('left') >= 0 || pinned.indexOf('right') >= 0) {\n        eAttachment.left = tAttachment.left = false;\n      }\n      if (pinned.indexOf('top') >= 0 || pinned.indexOf('bottom') >= 0) {\n        eAttachment.top = tAttachment.top = false;\n      }\n\n      if (tAttachment.top !== targetAttachment.top || tAttachment.left !== targetAttachment.left || eAttachment.top !== _this.attachment.top || eAttachment.left !== _this.attachment.left) {\n        _this.updateAttachClasses(eAttachment, tAttachment);\n        _this.trigger('update', {\n          attachment: eAttachment,\n          targetAttachment: tAttachment\n        });\n      }\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return { top: top, left: left };\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _TetherBase$Utils = TetherBase.Utils;\nvar getBounds = _TetherBase$Utils.getBounds;\nvar updateClasses = _TetherBase$Utils.updateClasses;\nvar defer = _TetherBase$Utils.defer;\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var _this = this;\n\n    var top = _ref.top;\n    var left = _ref.left;\n\n    var _cache = this.cache('element-bounds', function () {\n      return getBounds(_this.element);\n    });\n\n    var height = _cache.height;\n    var width = _cache.width;\n\n    var targetPos = this.getTargetBounds();\n\n    var bottom = top + height;\n    var right = left + width;\n\n    var abutted = [];\n    if (top <= targetPos.bottom && bottom >= targetPos.top) {\n      ['left', 'right'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === left || targetPosSide === right) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    if (left <= targetPos.right && right >= targetPos.left) {\n      ['top', 'bottom'].forEach(function (side) {\n        var targetPosSide = targetPos[side];\n        if (targetPosSide === top || targetPosSide === bottom) {\n          abutted.push(side);\n        }\n      });\n    }\n\n    var allClasses = [];\n    var addClasses = [];\n\n    var sides = ['left', 'top', 'right', 'bottom'];\n    allClasses.push(this.getClass('abutted'));\n    sides.forEach(function (side) {\n      allClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    if (abutted.length) {\n      addClasses.push(this.getClass('abutted'));\n    }\n\n    abutted.forEach(function (side) {\n      addClasses.push(_this.getClass('abutted') + '-' + side);\n    });\n\n    defer(function () {\n      if (!(_this.options.addTargetClasses === false)) {\n        updateClasses(_this.target, addClasses, allClasses);\n      }\n      updateClasses(_this.element, addClasses, allClasses);\n    });\n\n    return true;\n  }\n});\n/* globals TetherBase */\n\n'use strict';\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nTetherBase.modules.push({\n  position: function position(_ref) {\n    var top = _ref.top;\n    var left = _ref.left;\n\n    if (!this.options.shift) {\n      return;\n    }\n\n    var shift = this.options.shift;\n    if (typeof this.options.shift === 'function') {\n      shift = this.options.shift.call(this, { top: top, left: left });\n    }\n\n    var shiftTop = undefined,\n        shiftLeft = undefined;\n    if (typeof shift === 'string') {\n      shift = shift.split(' ');\n      shift[1] = shift[1] || shift[0];\n\n      var _shift = shift;\n\n      var _shift2 = _slicedToArray(_shift, 2);\n\n      shiftTop = _shift2[0];\n      shiftLeft = _shift2[1];\n\n      shiftTop = parseFloat(shiftTop, 10);\n      shiftLeft = parseFloat(shiftLeft, 10);\n    } else {\n      shiftTop = shift.top;\n      shiftLeft = shift.left;\n    }\n\n    top += shiftTop;\n    left += shiftLeft;\n\n    return { top: top, left: left };\n  }\n});\nreturn Tether;\n\n}));\n"]},"metadata":{},"sourceType":"script"}